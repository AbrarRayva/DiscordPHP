{"componentChunkName":"component---src-components-template-js","path":"/","result":{"data":{"staticMethods":{"edges":[{"node":{"id":"3f582c20-7305-563b-ac59-4f9732be48fd","frontmatter":{"title":"Intro"},"html":"<p>DiscordPHP is a wrapper for the Discord REST, WebSocket and Voice APIs. Built on top of <a href=\"https://reactphp.org/\">ReactPHP</a> components.</p>\n<h3>Requirements</h3>\n<ul>\n<li>\n<p>PHP 7.3 CLI</p>\n<ul>\n<li>Will not run on a webserver (FPM, CGI), you must run through CLI.</li>\n<li>Library <em>can</em> run on PHP 7.2 but support for this version will be removed soon. No support will be given if there are any errors.</li>\n<li>Expect the requirement to increased to PHP 7.4 without warning.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">ext-json</code> for JSON parsing.</li>\n<li><code class=\"language-text\">ext-zlib</code> for gateway packet compression.</li>\n</ul>\n<h4>Recommended Extensions</h4>\n<ul>\n<li>One of <code class=\"language-text\">ext-uv</code> (preferred), <code class=\"language-text\">ext-libev</code> or <code class=\"language-text\">evt-event</code> for a faster, and more performant event loop.</li>\n<li><code class=\"language-text\">ext-mbstring</code> if you may handle non-english characters.</li>\n</ul>\n<h4>Voice Requirements</h4>\n<ul>\n<li>64-bit Linux or Darwin based OS. Windows is not and is not planned to be supported.</li>\n<li><code class=\"language-text\">ext-sodium</code> for voice encryption.</li>\n<li>FFmpeg if you plan on playing anything but raw 16-bit little-endian PCM.</li>\n</ul>\n<h3>Installation</h3>\n<p>Installation requries <a href=\"https://getcomposer.org\">Composer</a>.</p>\n<p>To install the latest release:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">></span> <span class=\"token function\">composer</span> require team-reflex/discord-php</code></pre></div>\n<p>If you would like to run on the latest <code class=\"language-text\">master</code> branch:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">></span> <span class=\"token function\">composer</span> require team-reflex/discord-php dev-master</code></pre></div>\n<p><code class=\"language-text\">master</code> can be substituted for any other branch name to install that branch.</p>\n<h3>Key Tips</h3>\n<p>As Discord is a real-time application, events come frequently and it is vital that your code does not block the ReactPHP event loop.\nMost, if not all, functions return promises, therefore it is vital that you understand the concept of asynchronous programming with promises.\nYou can learn more about ReactPHP promises <a href=\"https://reactphp.org/promise/\">here</a>.</p>\n<h3>Help</h3>\n<p>If you need any help, feel free to join the <a href=\"\">PHP Discorders</a> Discord and someone should be able to give you a hand. We are a small community so please be patient if someone can't help you straight away.</p>\n<h3>Contributing</h3>\n<p>All contributions are welcome through pull requests in our GitHub repository. At the moment we would love contributions towards:</p>\n<ul>\n<li>Unit testing</li>\n<li>Documentation</li>\n</ul>","fields":{"idName":"intro"}}},{"node":{"id":"f43c9875-1d19-5a68-827c-6e2585ef0d89","frontmatter":{"title":"Basics"},"html":"<p>First step is to include the Composer autoload file.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">include</span> <span class=\"token constant\">__DIR__</span><span class=\"token punctuation\">.</span><span class=\"token single-quoted-string string\">'/vendor/autoload.php'</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<br>\n<p>The Discord instance can be set up with an array of options. All are optional except for token:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$discord</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Discord</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></code></pre></div>\n<p><code class=\"language-text\">token</code> is your Discord token. <strong>Required</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'token'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'Your-Token-Here'</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">intents</code> can be an array of valid intents <em>or</em> an integer representing the intents. Default is all intents.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'intents'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        Intents<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">GUILDS</span><span class=\"token punctuation\">,</span> Intents<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">GUILD_BANS</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// or</span>\n    <span class=\"token single-quoted-string string\">'intents'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">12345</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">loadAllMembers</code> is a boolean whether all members should be fetched and stored on bot start.\nLoading members takes a while to retrieve from Discord and store, so default is false.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'loadAllMembers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">storeMessages</code> is a boolean whether messages received and sent should be stored. Default is false.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'storeMessages'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">retrieveBans</code> is a boolean whether bans should be retrieved on bot load. Default is false.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'retrieveBans'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">pmChannels</code> is a boolean whether PM channels should be stored on bot load. Default is false.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'pmChannels'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">disabledEvents</code> is an array of events that will be disabled. By default all events are enabled.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'disabledEvents'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        Event<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">MESSAGE_CREATE</span><span class=\"token punctuation\">,</span> Event<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">MESSAGE_DELETE</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">loop</code> is an instance of a ReactPHP event loop that can be provided to the client rather than creating a new loop.\nUseful if you want to use other React components. By default, a new loop is created.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'loop'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> \\<span class=\"token package\">React<span class=\"token punctuation\">\\</span>EventLoop<span class=\"token punctuation\">\\</span>Factory</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">logger</code> is an instance of a logger that implements <code class=\"language-text\">LoggerInterface</code>. By default, a new Monolog logger is created to print to stdout.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'logger'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Logger</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'New lOgger'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">loggerLevel</code> is the level of logging that the default logger will use. See a list of possible constants <a href=\"https://github.com/Seldaek/monolog/blob/master/src/Monolog/Logger.php#L33-L78\">here</a>. Default is <code class=\"language-text\">INFO</code> level.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'loggerLevel'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> Logger<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">INFO</span><span class=\"token punctuation\">,</span></code></pre></div>\n<hr>\n<p>The following options should only be used by large bots that require sharding. If you plan to use sharding, <a href=\"https://discord.com/developers/docs/topics/gateway#sharding\">read up</a> on how Discord implements it.</p>\n<p><code class=\"language-text\">shardId</code> is the ID of the bot shard.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'shardId'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">shardCount</code> is the number of shards that you are using.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token single-quoted-string string\">'shardCount'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">]);</code></pre></div>\n<hr>\n<p>Gateway events should be registered inside the <code class=\"language-text\">ready</code> event, which is emitted once when the bot first starts and has connected to the gateway.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$discord</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'ready'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Discord <span class=\"token variable\">$discord</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></code></pre></div>\n<p>To register an event we use the <code class=\"language-text\">$discord-&gt;on(...)</code> function, which registers a handler.\nA list of events is available <a href=\"https://github.com/teamreflex/DiscordPHP/blob/master/src/Discord/WebSockets/Event.php#L30-L75\">here</a>. They are described in more detail in further sections of the documentation.\nAll events take a callback which is called when the event is triggered, and the callback is called with an object representing the content of the event and an instance of the <code class=\"language-text\">Discord</code> client.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">    <span class=\"token variable\">$discord</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span>Event<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">MESSAGE_CREATE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Message <span class=\"token variable\">$message</span><span class=\"token punctuation\">,</span> Discord <span class=\"token variable\">$discord</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ... handle message sent</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">});</code></pre></div>\n<br>\n<p>Finally, the event loop needs to be started:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$discord</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","fields":{"idName":"basics"}}}]}},"pageContext":{}},"staticQueryHashes":[]}